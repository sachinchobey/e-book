<div class="min-h-screen bg-cover bg-center p-10 relative"
  style="background-image: url('https://c4.wallpaperflare.com/wallpaper/479/101/113/germany-saxony-gorlitz-hall-historical-literature-wallpaper-preview.jpg');">
  <div class="absolute inset-0 bg-black opacity-50"></div>
  <div class="relative z-10">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-3xl font-bold text-white">📚 Available Books</h2>

      <div class="flex items-center gap-4">
        <div class="relative flex items-center">
          <button (click)="navigateToPurchasedBooks()"
            class="cursor-pointer relative bg-white hover:bg-green-300 text-white font-bold py-2 px-4 rounded transition duration-300 flex items-center">
            🛒
            <span
              class="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold w-5 h-5 flex items-center justify-center rounded-full">
              {{ purchasedBooks.length }}
            </span>
          </button>
        </div>

        <button (click)="signOut()"
          class="cursor-pointer bg-red-400 hover:bg-red-600 text-white font-bold py-2 px-4 rounded transition duration-300">
          ⏻
        </button>
      </div>
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
      <div *ngFor="let book of books" class="bg-white bg-opacity-90 rounded-lg shadow-lg p-4 relative">
        <div class="relative w-full h-30 bg-gray-200 rounded-lg overflow-hidden">
          <img src="https://bookstoreromanceday.org/wp-content/uploads/2020/08/book-cover-placeholder.png?w=144"
            alt="Book Cover" class="w-full h-full object-contain bg-white">
          <span class="absolute top-2 left-2 bg-black text-white text-xs px-2 py-1 rounded">-50%</span>
        </div>

        <h3 class="text-lg font-bold text-gray-800 mt-3">{{ book.name }}</h3>
        <p class="text-gray-600 mt-1 line-through">₹299.00</p>
        <p class="text-green-600 font-bold">₹199.00</p>
        <p class="text-gray-500 text-sm">Earn 495 BTH Points.</p>

        <button *ngIf="book.owners.includes(userId); else purchaseButton" (click)="readBook(book.id)"
          class="cursor-pointer bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded mt-3 transition duration-300 w-full">
          📖 Read Book
        </button>

        <ng-template #purchaseButton>
          <button (click)="purchaseBook(book.id)"
            class="cursor-pointer bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-3 transition duration-300 w-full">
            🛒 Purchase
          </button>
        </ng-template>

        <div class="flex cursor-pointer justify-center items-center gap-2 mt-2 text-gray-600 text-sm">
          <span>♡ Add to Wishlist</span>
        </div>
      </div>
    </div>
  </div>
</div>